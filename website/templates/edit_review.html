{% extends "base.html" %}
{% block title %}Edit Review{% endblock %}

{% block content %}
<div class="container mt-4">
    <!-- Vissza gomb -->
    <div class="mb-3">
        <a href="/books/{{ review.book_id }}" class="btn btn-secondary">
            <i class="fa fa-arrow-left"></i> Back to Book
        </a>
    </div>

    <div class="row justify-content-center">
        <div class="col-md-8">
            <!-- Book info -->
            <div class="alert alert-info">
                <h5>Editing review for:</h5>
                <strong>{{ review.book.title }}</strong> by {{ review.book.author }}
            </div>

            <!-- Edit review form -->
            <div class="card">
                <div class="card-header">
                    <h3>✏️ Edit Review</h3>
                </div>
                <div class="card-body">
                    <form method="POST">
                        <!-- Rating (kötelező) -->
                        <div class="form-group">
                            <label for="rating">Rating <span class="text-danger">*</span></label>
                            <select class="form-control" id="rating" name="rating" required>
                                <option value="">Select rating...</option>
                                <option value="5" {% if review.rating == 5 %}selected{% endif %}>⭐⭐⭐⭐⭐ 5 - Excellent</option>
                                <option value="4" {% if review.rating == 4 %}selected{% endif %}>⭐⭐⭐⭐ 4 - Very Good</option>
                                <option value="3" {% if review.rating == 3 %}selected{% endif %}>⭐⭐⭐ 3 - Good</option>
                                <option value="2" {% if review.rating == 2 %}selected{% endif %}>⭐⭐ 2 - Fair</option>
                                <option value="1" {% if review.rating == 1 %}selected{% endif %}>⭐ 1 - Poor</option>
                            </select>
                        </div>

                        <!-- Comment (opcionális) -->
                        <div class="form-group">
                            <label for="comment">Your Review</label>
                            <textarea 
                                class="form-control" 
                                id="comment" 
                                name="comment" 
                                rows="8"
                                placeholder="Share your thoughts about this book... (optional)"
                            >{{ review.comment or '' }}</textarea>
                            <small class="form-text text-muted">
                                Optional - You can write a detailed review or just leave a rating.
                            </small>
                        </div>

                        <hr>

                        <!-- Gombok -->
                        <div class="text-center">
                            <button type="submit" class="btn btn-success btn-lg">
                                <i class="fa fa-save"></i> Save Changes
                            </button>
                            <a href="/books/{{ review.book_id }}" class="btn btn-secondary btn-lg">
                                <i class="fa fa-times"></i> Cancel
                            </a>
                        </div>
                    </form>
                </div>
            </div>

            <!-- Info -->
            <div class="alert alert-warning mt-3">
                <strong>Note:</strong> Your review was originally posted on {{ review.created_at.strftime('%B %d, %Y') }}.
            </div>
        </div>
    </div>
</div>
{% endblock %}